<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Advanced Marks Calculator - Smart distribution of marks for MCQs, Short Questions, and Long Questions">
    <meta name="keywords" content="marks calculator, exam marks, MCQ marks, education tool">
    <meta property="og:title" content="Advanced Marks Calculator">
    <meta property="og:description" content="Smart marks distribution calculator for exams">
    <meta property="og:type" content="website">
    <link rel="icon" type="image/png" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0f172a">
    <title>Advanced Marks Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        /* Your complete CSS here */
        :root {
            --primary-color: #6366f1;
            --secondary-color: #4f46e5;
            --success-color: #10b981;
            --background-color: #0f172a;
            --card-background: rgba(30, 41, 59, 0.95);
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border-color: rgba(255, 255, 255, 0.1);
            --gradient-1: linear-gradient(135deg, #6366f1, #4f46e5);
            --gradient-2: linear-gradient(135deg, #10b981, #4f46e5);
            --gradient-3: linear-gradient(135deg, #f59e0b, #ef4444);
            --gradient-4: linear-gradient(135deg, #8b5cf6, #d946ef);
            --gradient-5: linear-gradient(135deg, #0ea5e9, #6366f1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            position: relative;
            overflow-x: hidden;
        }

        /* Add all your CSS styles here */
    </style>
</head>
<body>
    <div class="container">
        <div class="calculator-card">
            <div class="header">
                <h1>Advanced Marks Calculator</h1>
                <p>Smart distribution of marks for MCQs, Short Questions, and Long Questions</p>
            </div>
            
            <div class="input-grid">
                <div class="input-group">
                    <label for="totalMarks">Total Marks <span class="valid-marks">(20, 25, 30, 35, 40, 45, 50)</span></label>
                    <input type="number" id="totalMarks" min="20" max="50" value="40" required>
                </div>
                <div class="input-group">
                    <label for="mcqCount">Number of MCQs (5-8)</label>
                    <input type="number" id="mcqCount" min="5" max="8" value="6" required>
                </div>
            </div>

            <div class="button-group">
                <button class="btn calculate-btn" onclick="calculate()">Calculate Distribution</button>
                <button class="btn randomize-btn" onclick="randomize()">Randomize</button>
            </div>

            <div class="choices-container">
                <h3>Suggested Distributions</h3>
                <div id="choices"></div>
            </div>
        </div>

        <div class="preview-panel">
            <div class="pie-chart">
                <div class="pie-center">
                    <span class="total-number">40</span>
                    <span class="total-label">Total Marks</span>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <h4>MCQs</h4>
                    <p class="stat-value" id="mcqStats">6 √ó 2 = 12</p>
                </div>
                <div class="stat-card">
                    <h4>Short Questions</h4>
                    <p class="stat-value" id="shortStats">4 √ó 4 = 16</p>
                </div>
                <div class="stat-card">
                    <h4>Long Question</h4>
                    <p class="stat-value" id="longStats">1 √ó 12 = 12</p>
                </div>
            </div>
        </div>
    </div>

    <div class="theme-toggle">üåô</div>
    <div class="quick-actions">
        <button class="action-btn" title="Reset">‚Ü∫</button>
        <button class="action-btn" title="Copy">üìã</button>
        <button class="action-btn" title="Share">‚ÜóÔ∏è</button>
    </div>
    <div class="toast" id="toast"></div>

    <script>
        // Your complete JavaScript here
        function calculate() {
            const totalMarks = parseInt(document.getElementById('totalMarks').value);
            const mcqCount = parseInt(document.getElementById('mcqCount').value);
            
            // Validate inputs
            if (totalMarks < 20 || totalMarks > 50) {
                showToast('Total marks must be between 20 and 50');
                return;
            }
            
            if (mcqCount < 5 || mcqCount > 8) {
                showToast('Number of MCQs must be between 5 and 8');
                return;
            }

            // Round to valid marks
            const validMarks = [20, 25, 30, 35, 40, 45, 50];
            let roundedMarks = validMarks.reduce((prev, curr) => 
                Math.abs(curr - totalMarks) < Math.abs(prev - totalMarks) ? curr : prev
            );

            if (roundedMarks !== totalMarks) {
                showToast(`Adjusted to ${roundedMarks} marks for valid distribution`);
            }

            // Calculate distribution
            const mcqs = mcqCount * 2;
            const remaining = roundedMarks - mcqs;
            const shorts = Math.floor(remaining * 0.6);
            const long = remaining - shorts;

            // Update UI
            document.querySelector('.total-number').textContent = roundedMarks;
            document.getElementById('mcqStats').textContent = `${mcqCount} √ó 2 = ${mcqs}`;
            document.getElementById('shortStats').textContent = `${shorts/4} √ó 4 = ${shorts}`;
            document.getElementById('longStats').textContent = `1 √ó ${long} = ${long}`;

            // Animate
            const pieCenter = document.querySelector('.pie-center');
            pieCenter.classList.remove('animate');
            void pieCenter.offsetWidth;
            pieCenter.classList.add('animate');

            updateChoices(roundedMarks, mcqCount);
        }

        function randomize() {
            const validMarks = [20, 25, 30, 35, 40, 45, 50];
            const randomMarks = validMarks[Math.floor(Math.random() * validMarks.length)];
            const randomMcqs = Math.floor(Math.random() * 4) + 5; // 5-8

            document.getElementById('totalMarks').value = randomMarks;
            document.getElementById('mcqCount').value = randomMcqs;

            calculate();
        }

        function updateChoices(total, mcqCount) {
            const choices = document.getElementById('choices');
            choices.innerHTML = '';

            const distributions = generateDistributions(total, mcqCount);
            distributions.forEach((dist, index) => {
                const box = document.createElement('div');
                box.className = 'choice-box';
                box.innerHTML = `
                    <p>Distribution ${index + 1} <span class="marks-total">${total} marks</span></p>
                    <div class="distribution-info">
                        MCQs: ${mcqCount} √ó 2 = ${dist.mcqs} marks<br>
                        Short: ${dist.shorts/4} √ó 4 = ${dist.shorts} marks<br>
                        Long: 1 √ó ${dist.long} = ${dist.long} marks
                    </div>
                `;
                box.onclick = () => applyDistribution(dist);
                choices.appendChild(box);
            });
        }

        function generateDistributions(total, mcqCount) {
            const mcqs = mcqCount * 2;
            const remaining = total - mcqs;
            
            return [
                {
                    mcqs,
                    shorts: Math.floor(remaining * 0.6),
                    long: Math.ceil(remaining * 0.4)
                },
                {
                    mcqs,
                    shorts: Math.floor(remaining * 0.5),
                    long: Math.ceil(remaining * 0.5)
                },
                {
                    mcqs,
                    shorts: Math.floor(remaining * 0.7),
                    long: Math.ceil(remaining * 0.3)
                }
            ];
        }

        function applyDistribution(dist) {
            document.getElementById('mcqStats').textContent = `${dist.mcqs/2} √ó 2 = ${dist.mcqs}`;
            document.getElementById('shortStats').textContent = `${dist.shorts/4} √ó 4 = ${dist.shorts}`;
            document.getElementById('longStats').textContent = `1 √ó ${dist.long} = ${dist.long}`;

            const pieCenter = document.querySelector('.pie-center');
            pieCenter.classList.remove('animate');
            void pieCenter.offsetWidth;
            pieCenter.classList.add('animate');
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Theme toggle
        const themeToggle = document.querySelector('.theme-toggle');
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light-theme');
            themeToggle.textContent = document.body.classList.contains('light-theme') ? '‚òÄÔ∏è' : 'üåô';
        });

        // Quick actions
        document.querySelectorAll('.action-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const action = btn.title.toLowerCase();
                switch(action) {
                    case 'reset':
                        document.getElementById('totalMarks').value = 40;
                        document.getElementById('mcqCount').value = 6;
                        calculate();
                        showToast('Calculator reset to default values');
                        break;
                    case 'copy':
                        const text = `MCQs: ${document.getElementById('mcqStats').textContent}\nShort Questions: ${document.getElementById('shortStats').textContent}\nLong Question: ${document.getElementById('longStats').textContent}`;
                        navigator.clipboard.writeText(text);
                        showToast('Distribution copied to clipboard');
                        break;
                    case 'share':
                        const shareData = {
                            title: 'Advanced Marks Calculator',
                            text: 'Check out this smart marks distribution calculator!',
                            url: window.location.href
                        };
                        if (navigator.share) {
                            navigator.share(shareData);
                        } else {
                            showToast('Sharing not supported on this device');
                        }
                        break;
                }
            });
        });

        // Initialize
        calculate();

        // Register service worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').then(registration => {
                console.log('ServiceWorker registration successful');
            }).catch(err => {
                console.log('ServiceWorker registration failed: ', err);
            });
        }
    </script>
</body>
</html>